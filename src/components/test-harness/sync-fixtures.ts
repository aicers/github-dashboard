import type { SyncStatus } from "@/lib/sync/service";

export function buildSyncStatusFixture(): SyncStatus {
  return {
    config: {
      id: "default",
      org_name: "acme",
      auto_sync_enabled: true,
      sync_interval_minutes: 60,
      timezone: "Asia/Seoul",
      week_start: "monday",
      excluded_repository_ids: [],
      excluded_user_ids: [],
      allowed_team_slugs: [],
      allowed_user_ids: [],
      date_time_format: "auto",
      last_sync_started_at: "2024-04-02T09:00:00.000Z",
      last_sync_completed_at: "2024-04-02T10:30:00.000Z",
      last_successful_sync_at: "2024-04-02T10:30:00.000Z",
      backup_enabled: true,
      backup_hour_local: 2,
      backup_timezone: "Asia/Seoul",
      backup_last_started_at: "2024-04-01T17:00:00.000Z",
      backup_last_completed_at: "2024-04-01T17:02:00.000Z",
      backup_last_status: "success",
      backup_last_error: null,
      transfer_sync_hour_local: 4,
      transfer_sync_minute_local: 15,
      transfer_sync_timezone: "Asia/Seoul",
      transfer_sync_last_started_at: "2024-04-01T18:00:00.000Z",
      transfer_sync_last_completed_at: "2024-04-01T18:05:00.000Z",
      transfer_sync_last_status: "success",
      transfer_sync_last_error: null,
    },
    runs: [
      {
        id: 1,
        runType: "automatic",
        strategy: "incremental",
        since: "2024-04-02T08:00:00.000Z",
        until: null,
        status: "success",
        startedAt: "2024-04-02T09:00:00.000Z",
        completedAt: "2024-04-02T10:30:00.000Z",
        logs: [
          {
            id: 101,
            runId: 1,
            resource: "repositories",
            status: "success",
            message: "Processed repositories",
            startedAt: "2024-04-02T09:00:00.000Z",
            finishedAt: "2024-04-02T09:05:00.000Z",
          },
          {
            id: 102,
            runId: 1,
            resource: "issues",
            status: "success",
            message: "Processed issues",
            startedAt: "2024-04-02T09:05:00.000Z",
            finishedAt: "2024-04-02T09:15:00.000Z",
          },
          {
            id: 103,
            runId: 1,
            resource: "discussions",
            status: "success",
            message: "Processed discussions",
            startedAt: "2024-04-02T09:15:00.000Z",
            finishedAt: "2024-04-02T09:25:00.000Z",
          },
          {
            id: 104,
            runId: 1,
            resource: "pull_requests",
            status: "failed",
            message: "Timeout",
            startedAt: "2024-04-02T09:25:00.000Z",
            finishedAt: "2024-04-02T09:30:00.000Z",
          },
          {
            id: 105,
            runId: 1,
            resource: "reviews",
            status: "success",
            message: "Processed reviews",
            startedAt: "2024-04-02T09:30:00.000Z",
            finishedAt: "2024-04-02T09:40:00.000Z",
          },
          {
            id: 106,
            runId: 1,
            resource: "comments",
            status: "success",
            message: "Processed comments",
            startedAt: "2024-04-02T09:40:00.000Z",
            finishedAt: "2024-04-02T09:55:00.000Z",
          },
        ],
      },
    ],
    logs: [
      {
        id: 1,
        resource: "issues",
        status: "success",
        message: "Processed issues",
        started_at: "2024-04-02T09:00:00.000Z",
        finished_at: "2024-04-02T09:30:00.000Z",
        run_id: 1,
      },
      {
        id: 2,
        resource: "pull_requests",
        status: "failed",
        message: "Timeout",
        started_at: "2024-04-02T09:00:00.000Z",
        finished_at: "2024-04-02T09:15:00.000Z",
        run_id: 1,
      },
    ],
    dataFreshness: {
      issues: "2024-04-02T10:30:00.000Z",
      pullRequests: "2024-04-02T10:30:00.000Z",
      reviews: "2024-04-02T10:30:00.000Z",
      comments: "2024-04-02T10:30:00.000Z",
    },
    backup: {
      directory: "/var/backups/github-dashboard",
      retentionCount: 3,
      schedule: {
        enabled: true,
        hourLocal: 2,
        timezone: "Asia/Seoul",
        nextRunAt: "2024-04-03T17:00:00.000Z",
        lastStartedAt: "2024-04-01T17:00:00.000Z",
        lastCompletedAt: "2024-04-01T17:02:00.000Z",
        lastStatus: "success",
        lastError: null,
      },
      records: [
        {
          id: 1,
          filename: "db-backup-20240401-170000.dump",
          directory: "/var/backups/github-dashboard",
          filePath:
            "/var/backups/github-dashboard/db-backup-20240401-170000.dump",
          status: "success",
          trigger: "automatic",
          startedAt: "2024-04-01T17:00:00.000Z",
          completedAt: "2024-04-01T17:02:00.000Z",
          sizeBytes: 1024,
          error: null,
          restoredAt: null,
          createdBy: "admin-user",
          source: "database",
          isAdditionalFile: false,
          restoreKey: "db:1",
        },
      ],
    },
    transferSync: {
      schedule: {
        hourLocal: 4,
        minuteLocal: 30,
        timezone: "Asia/Seoul",
        nextRunAt: "2024-04-03T18:30:00.000Z",
        lastStartedAt: "2024-04-01T18:00:00.000Z",
        lastCompletedAt: "2024-04-01T18:05:00.000Z",
        lastStatus: "success",
        lastError: null,
      },
      isRunning: false,
    },
  };
}
